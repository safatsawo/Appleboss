(window.webpackJsonp=window.webpackJsonp||[]).push([["c3d2"],{Dkk0:function(e,v,E){"use strict";(function(r){var e=E("q1tI"),u=E.n(e),t=E("TSYQ"),c=E.n(t),a=E("xk4V"),o=E.n(a),n=E("zLbU"),l=E.n(n),i=E("cVPA"),p=E.n(i),s=E("YejT"),d=E.n(s),h=E("U8QE"),m=E("WP6v"),f=E("p19S"),b=E.n(f);var g=function(i){function e(e){var t,a,n;return(t=i.call(this,e)||this).onFileAdded=t.onFileAdded.bind(babelHelpers.assertThisInitialized(t)),t.setInputRef=t.setInputRef.bind(babelHelpers.assertThisInitialized(t)),t.uploadFile=t.uploadFile.bind(babelHelpers.assertThisInitialized(t)),t.uuid=o()(),void 0!==r.window&&void 0!==Symbol&&(a=new Promise(function(t){Promise.all([window._phrasesManifest._getPhrases(["7f9c"],"cVPA","V6kB",E),E.e("7f9c")]).then(function(e){t(babelHelpers.interopRequireWildcard(E("nEy6")))}.bind(null,E)).catch(E.oe)}),n="trust-asyncGetSensitiveImageScorer",a.chunkName=n,a).then(function(e){e.default().then(function(e){t.scorer=new e,t.scorer.load()})}),t}babelHelpers.inheritsLoose(e,i);var t=e.prototype;return t.onFileAdded=function(e){var t=this;if(e.target.files){var a=e.target.files[0];this.scorer&&a instanceof Blob?this.scorer.checkSensitivity({imageFile:a,continueUsingCurrentPhoto:function(){return t.uploadFile(a)},cancelUsingCurrentPhoto:function(){}}):this.uploadFile(a)}},t.setInputRef=function(e){this.inputRef=e},t.uploadFile=function(e){var t=this.props,a=t.onUploadStart,n=t.uploadPayload,i=t.onUploadComplete,r=t.onUploadSuccess,o=t.onUploadError;a();var s=new window.FormData;s.append("json_root_body",JSON.stringify(n)),s.append("image",e),d.a.ajax({type:"POST",url:l.a.getUrl("/v2/user_pictures"),data:s,processData:!1,contentType:!1}).then(function(e){r(e)},function(e){o(e)}).then(i,i),this.logPhotoSize(e)},t.logPhotoSize=function(e){e&&0<e.size&&this.props.logClick("activate_account_user_photo","upload_photo",{photo_size:e.size})},t.renderButton=function(){var e,t=this,a=this.props,n=a.onClick,i=a.jumboButton,r=a.showTakePhotoText,o=a.showAddPhotoText,s=a.useDLS,l=a.useDefaultButton,d=a.children;return e=r?p.a.t("booking_verification.take_or_choose_photo"):o?p.a.t("profile_pic_uploader.add_a_profile_picture"):p.a.t("profile_pic_uploader.upload_photo"),s?u.a.createElement(h.a,{onPress:function(){n(),t.inputRef.click()},secondary:!l,block:!0},u.a.createElement(m.b,{name:"gb_upload_photo"})," ".concat(e)):u.a.createElement("button",{onClick:function(){t.props.onClick(),t.inputRef.click()},className:c()("btn",this.props.className,{"btn-jumbo":i})},d||u.a.createElement("span",null,u.a.createElement("i",{className:"icon icon-upload",role:"presentation","aria-hidden":"true"})," ",e))},t.render=function(){return u.a.createElement("span",null,u.a.createElement("input",{className:"hidden-file-input-with-label",ref:this.setInputRef,type:"file",accept:"image/*",name:"image",role:"button",onChange:this.onFileAdded,hidden:!0}),this.renderButton())},e}(u.a.Component);g.defaultProps={uploadPayload:{},jumboButton:!1,showTakePhotoText:!1,showAddPhotoText:!1,useDLS:!1,useDefaultButton:!1,onUploadStart:function(){},onUploadSuccess:function(){},onUploadError:function(){},onUploadComplete:function(){},onClick:function(){},logClick:function(){}},v.a=b()("UploadPhotoButton",["onClick"])(g)}).call(this,E("cNzE"))},M7GX:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("I32s"),i=a("d+R9"),s=a("xiID"),l=a("Dkk0"),d=function(a){function e(e){var t;return(t=a.call(this,e)||this).state={uploading:!1},t.handleUploadStarted=t.handleUploadStarted.bind(babelHelpers.assertThisInitialized(t)),t.handleUploadCompleted=t.handleUploadCompleted.bind(babelHelpers.assertThisInitialized(t)),t}babelHelpers.inheritsLoose(e,a);var t=e.prototype;return t.handleUploadCompleted=function(){this.setState({uploading:!1})},t.handleUploadStarted=function(){this.setState({uploading:!0})},t.render=function(){var e=this.props,t=e.hasProfilePic,a=e.thumbnail,n=e.css,i=e.styles;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{top:3},r.a.createElement("div",n(i.photoContainer),r.a.createElement(s.a,{height:100,width:100,imageUrl:a}))),r.a.createElement(o.a,{vertical:2},r.a.createElement(l.a,{showAddPhotoText:t,onUploadSuccess:this.props.onSuccess,onUploadError:this.props.onError,onUploadStart:this.handleUploadStarted,onUploadComplete:this.handleUploadCompleted})))},e}(r.a.Component);t.a=Object(i.c)(function(){return{photoContainer:{display:"inline-block",padding:5,"vertical-align":"top"}}})(d)},Qtqi:function(e,t,a){"use strict";var n=a("zLbU"),i=a.n(n),r=a("6pYc"),o=a.n(r),s=a("vfiS"),l=a("Ebt4"),d=function(){function e(){this.generateActions("photoInitialized","photoWithoutFaceUploaded","photoChangeRequested","stepChangedViaBrowserNavigation")}var t=e.prototype;return t.photoUpdated=function(e){var t=0<arguments.length&&void 0!==e?e:{};return t.thumbnail_url&&o.a.emit(l.g.setUserProfilePicture,t.thumbnail_url),t},t.userConfirmedExistingPhotoHasFace=function(e){var t=this;return i.a.post("/v2/picture_face_detection_skips",{data:{vermeer_id:e.id}}).then(function(){t.actions.photoUpdated(e)})},t.userConfirmedRejectedPhotoHasFace=function(e){var t=this;return i.a.post("/v2/user_pictures",{data:{id:e.id,override_face_detection:!0}}).then(function(e){t.actions.photoUpdated(e.user_picture)})},e}();t.a=s.a.createActions(d)},TSYQ:function(e,t,a){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var n=typeof a;if("string"==n||"number"==n)e.push(a);else if(Array.isArray(a))e.push(o.apply(null,a));else if("object"==n)for(var i in a)r.call(a,i)&&a[i]&&e.push(i)}}return e.join(" ")}e.exports?e.exports=o:void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},VDKV:function(e,t,a){"use strict";var n=a("q1tI"),u=a.n(n),i=a("X3aX"),c=a.n(i),p=a("I32s"),h=a("cd3Z"),m=a("KLTD"),f=a("qpyF"),b=a("tPwf"),g=a("p1gX"),r=function(a){function e(e){var t;return(t=a.call(this,e)||this).state={modalVisible:!1,updatedProfileUrl:"",updatedFirstName:"",updatedLastName:""},t.onClick=t.onClick.bind(babelHelpers.assertThisInitialized(t)),t.onCloseModal=t.onCloseModal.bind(babelHelpers.assertThisInitialized(t)),t.onProfileUrlUpdate=t.onProfileUrlUpdate.bind(babelHelpers.assertThisInitialized(t)),t.onNameUpdate=t.onNameUpdate.bind(babelHelpers.assertThisInitialized(t)),t}babelHelpers.inheritsLoose(e,a);var t=e.prototype;return t.onClick=function(){this.setState({modalVisible:!0})},t.onCloseModal=function(){this.setState({modalVisible:!1})},t.onProfileUrlUpdate=function(e){this.setState({updatedProfileUrl:e})},t.onNameUpdate=function(e,t){this.setState({updatedFirstName:e,updatedLastName:t})},t.render=function(){var e=this.props,t=e.thumbnail,a=e.name,n=e.hasProfilePic,i=this.state,r=i.modalVisible,o=i.updatedProfileUrl,s=i.updatedFirstName,l=i.updatedLastName,d=u.a.createElement(h.b,{size:48,imageUrl:o||t,title:a});return u.a.createElement("div",null,u.a.createElement(p.a,{bottom:1},u.a.createElement(m.a,{before:d},u.a.createElement(p.a,{left:1},s||a,"  ",u.a.createElement(f.a,{onPress:this.onClick},u.a.createElement(c.a,{k:"shared.Edit"})),u.a.createElement("br",null),u.a.createElement(b.f,{muted:!0,small:!0,light:!0},u.a.createElement(c.a,{k:"china.signup.add_name_upsell.upsell_on_page"}))))),u.a.createElement(g.a,{visible:r,hasProfilePic:n,onClose:this.onCloseModal,thumbnail:t,onProfileUrlUpdate:this.onProfileUrlUpdate,onNameUpdate:this.onNameUpdate,updatedFirstName:s,updatedLastName:l}))},e}(u.a.Component);t.a=r},f9pH:function(e,t,a){"use strict";var n=a("q1tI"),c=a.n(n),i=a("X3aX"),p=a.n(i),r=a("YejT"),o=a.n(r),s=a("DhiP"),l=a.n(s),h=a("U8QE"),m=a("mOKU"),f=a("t0mF"),b=a("LroW"),g=a("I32s"),d=a("d+R9"),u=a("oDa9"),v=function(a){function e(e){var t;return(t=a.call(this,e)||this).state={loading:!1,firstName:t.props.updatedFirstName,lastName:t.props.updatedLastName,isFirstNameValid:!0,firstNameErrorMessage:"",isLastNameValid:!0,lastNameErrorMessage:""},t.getValidationErrors=t.getValidationErrors.bind(babelHelpers.assertThisInitialized(t)),t.handleValidationErrors=t.handleValidationErrors.bind(babelHelpers.assertThisInitialized(t)),t.onUpdateName=t.onUpdateName.bind(babelHelpers.assertThisInitialized(t)),t.onChangeFirstName=t.onChangeFirstName.bind(babelHelpers.assertThisInitialized(t)),t.onChangeLastName=t.onChangeLastName.bind(babelHelpers.assertThisInitialized(t)),t}babelHelpers.inheritsLoose(e,a);var t=e.prototype;return t.getValidationErrors=function(){var e=this.state,t=e.firstName,a=e.lastName;return Object(u.a)({first_name:t,last_name:a})},t.handleValidationErrors=function(e){0<e.first_name.length&&this.setState({isFirstNameValid:!1,firstNameErrorMessage:e.first_name[0]}),0<e.last_name.length&&this.setState({isLastNameValid:!1,lastNameErrorMessage:e.last_name[0]})},t.onChangeFirstName=function(e){this.setState({firstName:e,isFirstNameValid:!0,firstNameErrorMessage:""})},t.onChangeLastName=function(e){this.setState({lastName:e,isLastNameValid:!0,lastNameErrorMessage:""})},t.onUpdateName=function(){var t=this;this.setState({loading:!0});var e=this.state,a=e.firstName,n=e.lastName,i=this.getValidationErrors();if(!Object.values(i).every(function(e){return 0===e.length}))return this.handleValidationErrors(i),void this.setState({loading:!1});o.a.post("/update/".concat(l.a.current().id),{id:l.a.current().id,user:{first_name:a,last_name:n},update_auto_populated_name:!0}).then(function(e){t.setState({loading:!1}),e.success?(t.props.onFinish(),t.props.onNameUpdate(a,n)):t.props.onNameUpdateError()})},t.render=function(){var e=this.props,t=e.css,a=e.styles,n=this.state,i=n.loading,r=n.firstName,o=n.lastName,s=n.isFirstNameValid,l=n.firstNameErrorMessage,d=n.isLastNameValid,u=n.lastNameErrorMessage;return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{left:3,right:3},c.a.createElement(g.a,{bottom:1},c.a.createElement(f.a,null,c.a.createElement(m.a,null,c.a.createElement(b.a,{id:"last_name",name:"last_name",label:c.a.createElement(p.a,{k:"Last name"}),onChange:this.onChangeLastName,value:o,invalid:!d,errorMessage:u})))),c.a.createElement(f.a,null,c.a.createElement(m.a,null,c.a.createElement(b.a,{id:"first_name",name:"first_name",label:c.a.createElement(p.a,{k:"First name"}),onChange:this.onChangeFirstName,value:r,invalid:!s,errorMessage:l})))),c.a.createElement(g.a,{top:4},c.a.createElement("div",t(a.center),c.a.createElement(h.a,{onPress:this.onUpdateName,loading:i},c.a.createElement(p.a,{k:"china.signup.add_name_upsell.modal.submit"})))))},e}(c.a.Component);t.a=Object(d.c)(function(){return{center:{textAlign:"center"}}})(v)},oDa9:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var m=a("qB+W");function f(e,t){return"string"==typeof e&&t(e.length)}function s(e){var t,a,n,i,r,o,s,l,d=e.valueName,u=e.value,c=e.ruleName,p=e.ruleValue,h=(t=d,a=c,(n=Object(m.a)())&&n[t]&&n[t][a]||null);if(!h)return null;switch(c){case"required":return f(u,function(e){return 0<e})?null:h;case"maxlength":return l=p,f(u,function(e){return e<=l})?null:h;case"checkValidName":return r=/(?!^[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]+$)^.+$/.test(i=u),o=/^\d.+$/.test(i),s=/[~@$%^*_=?]/.test(i),!r||s||o?h:null;default:return null}}function n(e){var o={};return Object.entries(e).forEach(function(e){var t=babelHelpers.slicedToArray(e,2),i=t[0],r=t[1],a=m.b[i]||[],n=Object.entries(a).map(function(e){var t=babelHelpers.slicedToArray(e,2),a=t[0],n=t[1];return s({valueName:i,value:r,ruleName:a,ruleValue:n})}).filter(Boolean);o[i]=n}),o}},p1gX:function(e,t,a){"use strict";var n=a("q1tI"),p=a.n(n),i=a("X3aX"),h=a.n(i),m=a("ImbE"),f=a("Qe9p"),b=a("I32s"),g=a("yhop"),v=a("tPwf"),r=a("d+R9"),o=a("Qtqi"),E=a("f9pH"),_=a("M7GX"),s=function(a){function e(e){var t;return(t=a.call(this,e)||this).state={userPictureUrl:"",showError:!1},t.handleAddPhotoSuccess=t.handleAddPhotoSuccess.bind(babelHelpers.assertThisInitialized(t)),t.handleAddPhotoError=t.handleAddPhotoError.bind(babelHelpers.assertThisInitialized(t)),t.onNameUpdateError=t.onNameUpdateError.bind(babelHelpers.assertThisInitialized(t)),t.onClose=t.onClose.bind(babelHelpers.assertThisInitialized(t)),t}babelHelpers.inheritsLoose(e,a);var t=e.prototype;return t.handleAddPhotoSuccess=function(e){o.a.photoUpdated(e.user_picture),e.user_picture&&(this.setState({userPictureUrl:e.user_picture.image_url}),this.props.onProfileUrlUpdate(this.state.userPictureUrl))},t.handleAddPhotoError=function(e){if(e&&e.responseJSON&&e.responseJSON.picture_data){var t=e.responseJSON.picture_data;o.a.photoWithoutFaceUploaded(t)}else e&&this.setState({showError:!0})},t.onNameUpdateError=function(){this.setState({showError:!0})},t.onClose=function(){this.props.onClose(),this.setState({showError:!1})},t.render=function(){var e=this.props,t=e.visible,a=e.onNameUpdate,n=e.hasProfilePic,i=e.thumbnail,r=e.updatedFirstName,o=e.updatedLastName,s=e.css,l=e.styles,d=this.state,u=d.userPictureUrl,c=d.showError;return p.a.createElement(f.e,{small:!0,name:"name-upsell",visible:t,onClose:this.onClose,floatCloseButtonRight:!0},p.a.createElement(f.a,null,p.a.createElement(b.a,{top:3},p.a.createElement(b.a,{left:3,right:3},p.a.createElement("div",s(l.center),p.a.createElement(g.e,{level:3},p.a.createElement(h.a,{k:"china.signup.add_name_upsell.modal.title"})),p.a.createElement(v.f,{light:!0},p.a.createElement(h.a,{k:"china.signup.add_name_upsell.modal.subtitle"}))))),c&&p.a.createElement(b.a,{top:2,left:3,right:3},p.a.createElement(m.a,{hideCloseButton:!0,danger:!0,withIcon:!0,title:"",subtitle:p.a.createElement(h.a,{k:"auth_merge.error"})})),p.a.createElement("div",s(l.center),p.a.createElement(_.a,{hasProfilePic:u||n,thumbnail:u||i,onSuccess:this.handleAddPhotoSuccess,onError:this.handleAddPhotoError})),p.a.createElement(E.a,{onFinish:this.onClose,onNameUpdate:a,onNameUpdateError:this.onNameUpdateError,updatedFirstName:r,updatedLastName:o})))},e}(p.a.Component);t.a=Object(r.c)(function(){return{center:{textAlign:"center"}}})(s)},"qB+W":function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"a",function(){return s});var n=a("cVPA"),i=a.n(n),r=35,o={first_name:{required:!0,maxlength:r,checkValidName:!0},last_name:{required:!0,maxlength:r,checkValidName:!0}};function s(){return{first_name:{required:i.a.t("validation.failure.first_name_required"),maxlength:i.a.t("validation.failure.first_name_too_long",{smart_count:r}),checkValidName:i.a.t("validation.failure.first_name_only_has_invalid_characters")},last_name:{required:i.a.t("validation.failure.last_name_required"),maxlength:i.a.t("validation.failure.last_name_too_long",{smart_count:r}),checkValidName:i.a.t("validation.failure.last_name_only_has_invalid_characters")},success:i.a.t("validation.success")}}},vfiS:function(e,t,a){"use strict";var n=a("kSgk"),i=a.n(n);t.a=new i.a},xiID:function(e,t,a){"use strict";var n=a("q1tI"),d=a.n(n),i=a("TSYQ"),u=a.n(i),r=function(a){function e(e){var t;return(t=a.call(this,e)||this).state={loading:!1},t}babelHelpers.inheritsLoose(e,a);var t=e.prototype;return t.componentDidMount=function(){this.loadImage(this.props.imageUrl)},t.UNSAFE_componentWillReceiveProps=function(e){this.loadImage(e.imageUrl)},t.loadImage=function(e){var t=this;if(e){this.setState({loading:!0});var a=new Image;a.src=e,a.onload=function(){t.setState({loading:!1})},a.onerror=function(){t.setState({loading:!1})}}},t.render=function(){var e=this.props,t=e.alt,a=e.className,n=e.height,i=e.imageUrl,r=e.useLoadingIndicator,o=e.width,s=u()("media-photo media-round",a,{loading:this.state.loading&&r,"profile-photo--with-background-image":!i}),l=u()({invisible:!i});return d.a.createElement("div",{className:s},d.a.createElement("img",{className:l,src:i,height:n,width:o,alt:t}))},e}(d.a.Component);r.defaultProps={alt:"",height:130,width:130,useLoadingIndicator:!0},t.a=r}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/c3d2-84b004b0.js.map